import{c as y,j as e,u as F,a as P,A as S,m as b,X as $,C as A}from"./app-DQjgou4G.js";import{r as n,h as E,M as O}from"./bootstrap-DqmxCtC3.js";import{S as D}from"./shopping-bag-Byenc-0o.js";import{I as L}from"./image-B5gChpRb.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=y("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Y=({isOpen:s,onClose:c,onConfirm:t,title:l,message:h,confirmText:o,cancelText:d})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:l}),e.jsx("p",{className:"text-gray-600 mb-6",children:h}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:d}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded-lg",children:o})]})]})}):null,B=({isOpen:s,onClose:c})=>{const{cart:t,removeFromCart:l,updateQuantity:h,getCartTotal:o,clearCart:d}=F(),{showNotification:m}=P(),[g,u]=n.useState(!1),[f,p]=n.useState(!1),[x,w]=n.useState(null),r=n.useMemo(()=>o(),[t.items]),v=()=>{if(!g){if(t.items.length===0){m("Your cart is empty","error");return}u(!0),E.post("/checkout/order",{items:t.items.map(a=>({id:parseInt(a.id),quantity:parseInt(a.quantity),size:a.size||null,price:parseFloat(a.price)})),total:parseFloat(r),payment_method:"cash",order_type:"in-store"},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{d(),m("Order placed successfully!","success"),u(!1)},onError:a=>{console.error("Order error:",a),u(!1),m("Failed to place order. Please try again.","error")}})}},N=()=>{p(!0)},i=()=>{d(),p(!1),m("Cart cleared successfully","success")};return e.jsx(S,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:c,className:"fixed inset-0 bg-black bg-opacity-50 z-40",role:"presentation","aria-label":"Close cart drawer"}),e.jsxs(b.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:20},className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col",role:"dialog","aria-modal":"true","aria-labelledby":"cart-drawer-title",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-6 h-6 text-orange-500","aria-hidden":"true"}),e.jsx("h2",{id:"cart-drawer-title",className:"text-xl font-semibold",children:"Your Cart"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.items.length," items)"]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close cart drawer",children:e.jsx($,{className:"w-6 h-6","aria-hidden":"true"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:x?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(A,{className:"w-16 h-16 mx-auto text-green-500 mb-4","aria-hidden":"true"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Order Placed Successfully!"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Your order #",e.jsx("span",{className:"font-semibold",children:x})," has been placed."]}),e.jsxs("p",{className:"text-gray-600",children:["Total: ",e.jsxs("span",{className:"font-semibold",children:[r.toFixed(2)," DH"]})]})]}):t.items.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"w-16 h-16 mx-auto text-gray-400 mb-4","aria-hidden":"true"}),e.jsx("p",{className:"text-gray-500",children:"Your cart is empty"})]}):e.jsx("div",{className:"p-4 space-y-4",children:t.items.map(a=>e.jsxs(b.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex gap-4 bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,className:"w-20 h-20 object-cover rounded-lg","aria-hidden":"true"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:a.name}),a.size&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Size: ",a.size]})]}),e.jsx("button",{onClick:()=>l(a.id,a.size),className:"text-gray-400 hover:text-red-500 transition-colors","aria-label":`Remove ${a.name} from cart`,children:e.jsx(I,{className:"w-5 h-5","aria-hidden":"true"})})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(a.id,a.size,Math.max(1,a.quantity-1)),disabled:a.quantity===1,className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":`Decrease quantity of ${a.name}`,children:e.jsx(H,{className:"w-4 h-4","aria-hidden":"true"})}),e.jsx("span",{className:"w-8 text-center",children:a.quantity}),e.jsx("button",{onClick:()=>h(a.id,a.size,a.quantity+1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":`Increase quantity of ${a.name}`,children:e.jsx(q,{className:"w-4 h-4","aria-hidden":"true"})})]}),e.jsxs("p",{className:"font-semibold text-orange-500",children:[(parseFloat(a.price)*a.quantity).toFixed(2)," DH"]})]})]})]},`${a.id}-${a.size}`))})}),!x&&t.items.length>0&&e.jsxs("div",{className:"border-t p-4 bg-white",children:[e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Subtotal"}),e.jsxs("span",{children:[r.toFixed(2)," DH"]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg pt-2 border-t",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[r.toFixed(2)," DH"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:v,disabled:g,className:`w-full py-3 bg-orange-500 text-white rounded-lg font-semibold 
                                            ${g?"opacity-75 cursor-not-allowed":"hover:bg-orange-600"} 
                                            transition-colors`,"aria-label":"Place order",children:g?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Place Order",e.jsxs("span",{className:"text-sm opacity-90",children:["(",r.toFixed(2)," DH)"]})]})}),e.jsxs("button",{onClick:N,className:"w-full py-3 text-red-500 hover:bg-red-50 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2","aria-label":"Clear cart",children:[e.jsx(I,{className:"w-5 h-5","aria-hidden":"true"}),"Clear Cart"]})]})]})]}),e.jsx(Y,{isOpen:f,onClose:()=>p(!1),onConfirm:i,title:"Clear Cart",message:"Are you sure you want to clear your cart?",confirmText:"Clear",cancelText:"Cancel"})]})})},R=({product:s,onAddToCart:c})=>{var x,w;const[t,l]=n.useState(!1),[h,o]=n.useState(null),[d,m]=n.useState(1),[g,u]=n.useState(!1),f=()=>{var r;((r=s.prices)==null?void 0:r.length)>0&&!h||(c(s,d,h),l(!1),o(null),m(1))},p=()=>{u(!0)};return e.jsxs(b.div,{whileHover:{y:-5},className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-Lg border border-gray-400 overflow-hidden relative group hover:shadow-2xl transition-all duration-300",children:[e.jsxs("div",{className:"relative h-56 overflow-hidden bg-gradient-to-br from-orange-50 to-orange-100",onClick:()=>l(!t),children:[!g&&s.image?e.jsx("img",{src:s.image,alt:s.name,onError:p,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100",children:e.jsx(L,{className:"w-20 h-20 text-orange-200"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-transparent"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-orange-600 mb-2",children:s.name}),e.jsx("p",{className:"text-base text-gray-600 line-clamp-2 mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[((x=s.prices)==null?void 0:x.length)>0?e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Starting from"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.min(...s.prices.map(r=>r.price))," DH"]})]}):e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[s.price," DH"]}),e.jsx("button",{onClick:()=>l(!t),className:"p-2 rounded-2xl bg-orange-50 text-orange-600 hover:bg-orange-100 transition-colors","aria-label":t?"Collapse details":"Expand details",children:t?e.jsx(V,{className:"w-6 h-6"}):e.jsx(Q,{className:"w-6 h-6"})})]}),e.jsx(S,{children:t&&e.jsxs(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-6 space-y-4 overflow-hidden",children:[((w=s.prices)==null?void 0:w.length)>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-700 mb-3",children:"Select Size"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.prices.map(r=>e.jsxs("button",{onClick:()=>o(r.size),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 ${h===r.size?"bg-orange-500 text-white shadow-lg shadow-orange-500/30":"bg-orange-50 text-orange-700 hover:bg-orange-100"}`,"aria-label":`Select size ${r.size} for ${r.price} DH`,children:[r.size," - ",r.price," DH"]},r.size))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-orange-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>m(Math.max(1,d-1)),className:"w-10 h-10 flex items-center justify-center rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-100 transition-colors","aria-label":"Decrease quantity",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-medium text-orange-600 w-8 text-center text-xl",children:d}),e.jsx("button",{onClick:()=>m(d+1),className:"w-10 h-10 flex items-center justify-center rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-100 transition-colors","aria-label":"Increase quantity",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:f,className:"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors shadow-lg shadow-orange-500/30 font-medium","aria-label":"Add to cart",children:"Add to Cart"})]})]})})]})]})},_=({categories:s,selectedCategory:c,onSelect:t})=>e.jsxs("div",{className:"flex gap-4 overflow-x-auto hide-scrollbar py-4 px-6",children:[e.jsx("button",{onClick:()=>t(null),className:`px-6 py-3 rounded-2xl whitespace-nowrap transition-all duration-300 text-base font-medium ${c?"bg-white/80 backdrop-blur-sm text-orange-700 hover:bg-orange-50 border border-orange-100":"bg-orange-500 text-white shadow-lg shadow-orange-500/30"}`,"aria-label":"Show all items",children:"All Items"}),s.map(l=>e.jsx("button",{onClick:()=>t(l.id),className:`px-6 py-3 rounded-2xl whitespace-nowrap transition-all duration-300 text-base font-medium ${c===l.id?"bg-orange-500 text-white shadow-lg shadow-orange-500/30":"bg-white/80 backdrop-blur-sm text-orange-700 hover:bg-orange-50 border border-orange-100"}`,"aria-label":`Filter by ${l.name}`,children:l.name},l.id))]}),U=({message:s})=>e.jsx(b.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-24 right-4 bg-orange-500 text-white px-6 py-3 rounded-2xl shadow-lg shadow-orange-500/30 z-50","aria-live":"polite",children:s}),K=({products:s,categories:c})=>{const t=s.data,[l,h]=n.useState(null),[o,d]=n.useState(""),[m,g]=n.useState(!1),[u,f]=n.useState(!1),{addToCart:p,getCartCount:x,getCartTotal:w}=F(),r=n.useMemo(()=>t.filter(i=>{var C;const a=!l||i.category_id===l,j=!o||i.name.toLowerCase().includes(o.toLowerCase())||((C=i.description)==null?void 0:C.toLowerCase().includes(o.toLowerCase()));return a&&j}),[s,l,o]),v=n.useCallback((i,a,j)=>{var z,M;if(!j&&((z=i.prices)==null?void 0:z.length)>0){N("Please select a size");return}if(!(j?(M=i.prices.find(T=>T.size===j))==null?void 0:M.price:i.price)){N("Invalid price configuration");return}p(i,a,j),N("Added to cart!")},[p]),N=i=>{f({message:i,show:!0}),setTimeout(()=>f(!1),3e3)};return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Menu"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-100",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-orange-500 backdrop-blur-md shadow-lg",children:e.jsx("div",{className:"max-w-[2000px] mx-auto px-6 py-4",children:e.jsxs("div",{className:"w-full flex items-center justify-between gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("h1",{className:"text-2xl font-bold text-orange-100",children:"RestoPos"})}),e.jsx("div",{className:"flex-1 relative max-w-3xl",children:e.jsx("input",{type:"text",placeholder:"Search menu...",value:o,onChange:i=>d(i.target.value),className:"w-full px-4 py-2 pl-10 rounded-xl border border-orange-400 focus:ring-2 focus:ring-orange-300 text-gray-800 bg-white/90 backdrop-blur-sm","aria-label":"Search menu"})}),e.jsxs("button",{className:"p-3 rounded-2xl bg-orange-400 text-white relative hover:bg-orange-700 transition-colors shadow-lg shadow-orange-500/30",onClick:()=>g(!0),"aria-label":"Open cart",children:[e.jsx(k,{className:"w-6 h-6"}),x()>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-orange-500 text-sm font-bold rounded-full w-6 h-6 flex items-center justify-center shadow-lg",children:x()})]})]})})}),e.jsx("div",{className:"sticky top-[85px] bg-white/50 backdrop-blur-sm z-30 shadow-sm border-y border-orange-100",children:e.jsx("div",{className:"max-w-[2000px] mx-auto",children:e.jsx(_,{categories:c,selectedCategory:l,onSelect:h})})}),e.jsx("main",{className:"max-w-[2000px] mx-auto px-6 py-8",children:e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:r.map(i=>e.jsx(R,{product:i,onAddToCart:v},i.id))})}),x()>0&&e.jsx(b.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"fixed bottom-0 inset-x-0 bg-white/80 backdrop-blur-md border-t border-orange-100 shadow-lg z-30",children:e.jsxs("div",{className:"max-w-[2000px] mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-6 h-6 text-orange-500"}),e.jsxs("span",{className:"text-lg font-medium",children:[x()," items"]})]}),e.jsxs("div",{className:"text-2xl font-bold text-orange-500",children:[w()," DH"]})]}),e.jsx("button",{onClick:()=>g(!0),className:"px-8 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors shadow-lg shadow-orange-500/30 font-medium text-lg","aria-label":"View cart",children:e.jsx(k,{className:"w-6 h-6"})})]})}),e.jsx(B,{isOpen:m,onClose:()=>g(!1)}),e.jsx(S,{children:u&&e.jsx(U,{message:u.message})})]})]})};export{K as default};
